dist: trusty
sudo: required

language: java

jdk:
  - oraclejdk8

#services:
#  - mysql

os:
  - linux

before_script:
  # for debugging purposes
  - php --version
  - chmod +x gradlew

script:
  - ./gradlew test
  - ./gradlew clean tomcatRun
  - cat ./tomcat.log
  - sleep 10
  - cat ./tomcat.log
  - sudo netstat -nlp | grep :8090
  - ./.travis/test_build_against_soluble_japha.sh
  - ./gradlew jacocoTestReport

after_failure:
  - cat ./tomcat.log

after_success:
  - bash <(curl -s https://codecov.io/bash)


